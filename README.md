# README

This is a set of code designed to characterise a Paul trap geometry and then predict the parameters that lead to stable trapping.
For use in the Swansea University Optomechanics lab, this is very early work.

## Instructions
Below is the basic procedure to follow to test if a trap geometry and parameters are stable:

1) **Model the trap geometry as a set of <code>.stl</code> files.**  In <code>Trap_Scuff</code> I have an example. I have the files: <code>ECB.stl</code>, <code>ECT.stl</code>, and <code>Rod.stl</code>. These are the files for the Bottom End Cap, Top End Cap, and RF Rods respectively. Because the four rods are the same, I have meshed one and include translations in the next step to save computational power.

2) **Set up the extra files to define the problem.** This include the <code>.scuffgeo</code>, <code>.Excitations</code>, and various <code>args</code> files. The <code>TrapAC.scuffgeo</code> and <code>TrapDC.scuffgeo</code> are exactly the same and define each of the trapping rods and the end caps displacing them into the right locations. I have these as two separate files so that the output files are given more pertinent names. The <code>.Excitations</code> files contain the details about which electrodes are given a voltage for each test.

3) **Run the code <code>scuff-static < args</code> replacing <code>args</code> with the corresponding <code>args</code> file.** I have <code>args</code> files for each geometric factor, $\alpha_x^{\text{AC}}$, $\alpha_y^{\text{AC}}$, $\alpha_z^{\text{AC}}$, and $\alpha_z^{\text{DC}}$. They simply tell <code>scuff-static</code> which of the extra files to look at when finding the potentials. They will output <code>.out</code> files, the files I have set up will name them <code>Trap{Voltage}.{axis}_axis.out</code> where the <code>{Voltage}</code> is replaced with either <code>AC</code> or <code>DC</code> depending on which electrodes are excited, and <code>{axis}</code> is replaced with the axis we measure on.

4) **Run <code>Plot.py</code> to find the geometric factors.** This code will plot the potential measured by <code>scuff-static</code> for each case and curve fit this to a quadratic (See Chap. 3 of Woodrow Thesis) and read off the amplitude of the potential. From this we find the geometric factors via $\alpha_i^u = \frac{Q_i^V d^2}{V_u}$ where $i$ is the axis, and $u$ is either AC or DC dependant on with electrodes are excited (See Chap 2 in Woodrow Thesis).

5) **Run <code>Stability.py</code> and set the appropriate geometric factors.** This will plot a graph of the Mathieu stability regions and plot where the current set up falls in this parameter space. I have defined $a = - \frac{4ZeQ_z^{\text{DC}}}{m\Omega^2} = a_x = a_y = -\frac{a_z}{2}$ and $|q| = \frac{4ZeQ_r^{\text{AC}}}{m\Omega^2} = |q_x| = |q_y| = \left|q_z \frac{\alpha_z^{\text{AC}}}{\alpha_r^{\text{AC}}} \left(\frac{r_0}{z_0}\right)^2 \right|$ and $\alpha_r^{\text{AC}} = \frac{\alpha_x^{\text{AC}} + \alpha_y^{\text{AC}}}{2}$. The graph has 3 regions shown. In red the particle's secular motion is axially unstable and will be lost. In orange it is radially unstable. The unshaded region is the stable region. Note that as we change the AC geometric factors or the trap size, the stable region changes due to the ratio in $\left|q_z \frac{\alpha_z^{\text{AC}}}{\alpha_r^{\text{AC}}} \left(\frac{r_0}{z_0}\right)^2 \right|$. As long as the blue point is within the unshaded region, we *should* have stable trapping. We can adjust the sliders to see what parameters are needed to achive this with a given trap geometry.

6) **Once the frequency of secular radial motion has been found, run <code>Charge_Estimate.py</code>.** Make sure that all the variables are set right and then run the code to find the charge on the particle. My hope in the future is to set this up so that we simply pass the motion of the particle to the code and it will estimate the frequency itself and output the charge. Currently this is using values from the 2020 Bykov paper and gives pretty close agreement.
